!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define("UiTree",["vue"],t):"object"===typeof exports?exports.UiTree=t(require("vue")):e.UiTree=t(e.Vue)}("undefined"!==typeof self?self:this,(function(e){return function(){"use strict";var t={996:function(e){var t=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===a}(e)}(e)};var a="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?d((a=e,Array.isArray(a)?[]:{}),e,t):e;var a}function r(e,t,a){return e.concat(t).map((function(e){return n(e,a)}))}function l(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function o(e,t){try{return t in e}catch(a){return!1}}function c(e,t,a){var r={};return a.isMergeableObject(e)&&l(e).forEach((function(t){r[t]=n(e[t],a)})),l(t).forEach((function(l){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,l)||(o(e,l)&&a.isMergeableObject(t[l])?r[l]=function(e,t){if(!t.customMerge)return d;var a=t.customMerge(e);return"function"===typeof a?a:d}(l,a)(e[l],t[l],a):r[l]=n(t[l],a))})),r}function d(e,a,l){(l=l||{}).arrayMerge=l.arrayMerge||r,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=n;var o=Array.isArray(a);return o===Array.isArray(e)?o?l.arrayMerge(e,a,l):c(e,a,l):n(a,l)}d.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,a){return d(e,a,t)}),{})};var s=d;e.exports=s},895:function(t){t.exports=e}},a={};function n(e){var r=a[e];if(void 0!==r)return r.exports;var l=a[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var r={};return function(){n.d(r,{default:function(){return B}});var e=n(996),t=n.n(e);const a=/(?:^\[object\s(.*?)\]$)/;var l=e=>Object.prototype.toString.call(e).replace(a,"$1").toLowerCase();const o=e=>{let{componentProps:a,propName:n,props:r}=e,o=r[n];if("object"===l(o)){const e=a[n].default;a[n].default=()=>t()(e,o)}else Array.isArray(o)?a[n].default=()=>o:a[n].default=o},c=e=>{let{componentMixins:t,propName:a,props:n}=e;if(t.length){let e=t.length;for(;e--;)if(t[e].props&&void 0!==t[e].props[a]){o({componentProps:t[e].props,propName:a,props:n});break}}};var d=(e,t)=>{for(const a of Object.keys(t))e.props?void 0===e.props[a]?c({componentMixins:e.mixins,propName:a,props:t}):o({componentProps:e.props,propName:a,props:t}):c({componentMixins:e.mixins,propName:a,props:t})};var s=(e,t)=>{for(const a of Object.keys(t))if(/^Ui[A-Z]{1}[A-Za-z]+$/.test(a)){const n=e[a],r=t[a];d(n,r)}};var i=e=>{const t={install(t){s(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});for(let a in e){const n=e[a];t.component(n.name,n)}}};return t},u=n(895);const p=(e,t,a)=>{let{selectedValue:n,nodeMap:r,dataFormat:l}=e,{level:o,parentKey:c}=a,d=Object.assign({},t);const{value:s,children:i,hasChildren:u,isLeaf:p,disabled:h}=l,f=d[s],m=d[i],k=((e,t,a)=>e[t]||!a)(d,p,d[u]||m);return d.level=o,d.isRoot=!o,d.isLeaf=k,d.expanded=!1,d.selected=!Array.isArray(n)&&f===n,d.checked=Array.isArray(n)&&n.includes(f),d.parentKey=c,d.disabled=d[h],m||(d[i]=[]),k||(d.indeterminate=!1),r.has(f)||r.set(f,d),d};let h=[];class f{constructor(e){this.treeData=e}getData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const{dataFormat:n,maxLevel:r}=this.treeData,l=[],{value:o,children:c,hasChildren:d}=n;for(let s=0,i=e.length;s<i;s++){let n=p(this.treeData,e[s],{level:t,parentKey:a});const i=n[c],u=n[d]||i;t<r&&u&&(n[c]=this.getData(i,t+1,n[o])),l.push(n)}return l}static addData(e,t,a){const{dataFormat:n,nodeMap:r}=e,l=[],{value:o,children:c}=n,d=t.level+1,s=t[o];for(let i=0,u=a.length;i<u;i++){let t=p(e,a[i],{level:d,parentKey:s});t.checked&&this.setMultipleSelectedValue(e,t[o],!0),l.push(t)}t[c]=l,t.expanded=!0,r.set(s,t)}static async onExpand(e,t){if(e.loadData){const{dataFormat:a}=e;if(t[a.children]&&t[a.children].length)t.expanded=!t.expanded;else{let n=await e.loadData(t[a.value]);Array.isArray(n)?this.addData(e,t,n):console.warn("[UiTree]","Invalid data")}}else t.expanded=!t.expanded}static setSingleSelectedValue(e,t,a){const{nodeMap:n}=e,r=n.get(t);r&&(r.selected=a,e.selectedEvent={selected:a,selectedNodes:t,node:r})}static onSelect(e,t){const{dataFormat:a,selectedValue:n}=e,r=t[a.value];n&&this.setSingleSelectedValue(e,n,!1),e.selectedValue=r,this.setSingleSelectedValue(e,r,!0)}static setMultipleSelectedValue(e,t,a){const{indeterminate:n}=e.nodeMap.get(t);a&&!n?e.selectedValue.includes(t)||e.selectedValue.push(t):e.selectedValue=e.selectedValue.filter((e=>e!==t))}static setChildrenCheckedValue(e,t,a){const{dataFormat:n,nodeMap:r}=e,{value:l,children:o,isLeaf:c}=n;for(let d=0,s=t.length;d<s;d++){let n=Object.assign({},t[d]);const s=n[l],i=n[o],u=r.get(s);u&&(a?!u.checked&&h.push(s):u.checked&&h.push(s),u.indeterminate=!1,u.checked=a,this.setMultipleSelectedValue(e,s,a)),!n[c]&&i.length&&this.setChildrenCheckedValue(e,i,a)}}static setParentCheckedValue(e,t){const{dataFormat:a,nodeMap:n}=e,{value:r,children:l}=a;if(t){const a=t[r],o=t[l],c=o.filter((e=>e.checked||e.indeterminate)),d=n.get(a);if(c.length){const t=c.filter((e=>e.checked)).length,n=t===o.length;n?!d.checked&&h.push(a):d.checked&&h.push(a),d.checked=n,d.indeterminate=!n,this.setMultipleSelectedValue(e,a,n)}else d.checked=!1,d.indeterminate=!1;t.isRoot||this.setParentCheckedValue(e,n.get(t.parentKey))}}static onCheck(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=!t.checked;"boolean"===typeof a&&(n=a);const{dataFormat:r,nodeMap:l,singleChecked:o}=e,{value:c,children:d,isLeaf:s}=r,i=t[c],u=t[d];o?(t.checked=n,this.setMultipleSelectedValue(e,i,n),console.log("gg"),e.selectedEvent={checked:n,checkedNodes:[i],node:t}):(h=[i],t[s]?(t.checked=n,this.setMultipleSelectedValue(e,i,n)):(t.indeterminate&&(t.indeterminate=!1,n=!0),t.checked=n,this.setMultipleSelectedValue(e,i,n),this.setChildrenCheckedValue(e,u,n)),t.isRoot||this.setParentCheckedValue(e,l.get(t.parentKey)),e.selectedEvent={checked:n,checkedNodes:h,node:t})}static async setExpanded(e,t,a){let{autoExpandParent:n,defaultExpandedKeys:r}=a;const{dataFormat:l,nodeMap:o}=e;if(n){const a=r.length?t.filter((e=>r.includes(e[l.value]))):t;for await(let t of a){const a=t[l.value],n=o.get(a);this.onExpand(e,n)}}}static resetSelected(e,t){const{nodeMap:a}=e;for(let n=0,r=t.length;n<r;n++){const r=t[n],l=a.get(r);l&&this.onCheck(e,l,!1)}}static setSelected(e,t){const{nodeMap:a,multiple:n}=e,r=Array.isArray(t)?t:[t];for(let l=0,o=r.length;l<o;l++){const t=r[l],o=a.get(t);o&&(n?this.onCheck(e,o,!0):this.onSelect(e,o))}}static async createNode(e,t,a){const{dataFormat:n,nodeMap:r}=e,{value:l,children:o,hasChildren:c,isLeaf:d}=n,s=r.get(t),i=a[l];let u=p(r,n,a,s.level);s[d]?(s[o].unshift(u),s[c]||(s[c]=!0),s[d]=!1):s[c]?s[o].length?s[o].unshift(u):await this.onExpand(e,s):(s[o].unshift(u),s[c]=!0,s.expanded=!0),r.set(t,s),r.set(i,u)}static updateNode(e,t,a){const{dataFormat:n,nodeMap:r}=e,{value:l,children:o}=n,c=a[l],d=r.get(c);Object.keys(d).forEach((e=>{"undefined"!==typeof a[e]&&(d[e]=a[e])}));const s=r.get(t),i=s[o].findIndex((e=>e[l]===c));s[o][i]=d,r.set(t,s),r.set(c,d)}static deleteNode(e,t,a){const{dataFormat:n,nodeMap:r}=e,{value:l,children:o,hasChildren:c}=n,d=a[l];if(r.has(d)){const e=r.get(t),a=e[o];a.splice(a.findIndex((e=>e[l]===d)),1),e[c]=a.length,e[c]||(e.isLeaf=!0,e.expanded=!1),r.set(t,e),r.delete(d)}}}const m=["checked","disabled"],k=(0,u.createStaticVNode)('<div class="mdc-checkbox__background"><svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24"><path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"></path></svg><div class="mdc-checkbox__mixedmark"></div></div><div class="mdc-checkbox__ripple"></div><div class="mdc-checkbox__focus-ring"></div>',3),y={name:"MdcCheckbox",customOptions:{}};var v=Object.assign(y,{props:{checked:{type:[Boolean,null],default:null},indeterminate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},setup(e,t){let{expose:a}=t;const n=e,r=(0,u.ref)(null),l=(0,u.ref)(null);return(0,u.onMounted)((()=>{n.indeterminate&&(l.value.indeterminate=n.indeterminate),n.disabled&&(l.value.disabled=n.disabled),(0,u.watch)((()=>n.indeterminate),(e=>l.value.indeterminate=e)),(0,u.watch)((()=>n.disabled),(e=>l.value.disabled=e))})),a({mdcCheckbox:r,reset:function(){l.value.indeterminate?l.value.indeterminate=!1:l.value.checked=!1}}),(t,a)=>((0,u.openBlock)(),(0,u.createElementBlock)("div",{ref_key:"mdcCheckbox",ref:r,class:"mdc-checkbox"},[(0,u.renderSlot)(t.$slots,"default",{},(()=>[(0,u.createElementVNode)("input",{ref_key:"checkbox",ref:l,type:"checkbox",class:"mdc-checkbox__native-control",checked:e.checked,disabled:e.disabled},null,8,m)])),k],512))}});const b={cssClasses:{icon:"material-icons"},EVENTS:{CLICK:"click"},getMaterialIconClass:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return[b.cssClasses.icon,...t]}};var g=b;const x={key:0,class:"mdc-tree-node__indent"},E={class:"mdc-tree-node__icon"},C=["onClick"],V=["onClick"],S=["onClick"],D={name:"UiTreeNode",customOptions:{UI_GLOBAL:g}};var M=Object.assign(D,{props:{children:{type:Array,default:()=>[]},treeData:{type:Object,default:()=>({})}},setup(e){const t=e,a=t.treeData.dataFormat;function n(e){e.disabled||f.onCheck(t.treeData,e)}function r(e){const{children:t,...n}=e;return e[a.isLeaf]?e:n}return(l,o)=>{const c=(0,u.resolveComponent)("ui-tree-node");return(0,u.openBlock)(),(0,u.createElementBlock)("ul",null,[((0,u.openBlock)(!0),(0,u.createElementBlock)(u.Fragment,null,(0,u.renderList)(e.children,((o,d)=>((0,u.openBlock)(),(0,u.createElementBlock)("li",{key:d,class:(0,u.normalizeClass)(["mdc-tree-node",{"mdc-tree-node--root":o.isRoot,"mdc-tree-node--leaf":o.isLeaf}])},[(0,u.createElementVNode)("div",{class:(0,u.normalizeClass)(["mdc-tree-node__content",{"mdc-tree-node--selected":o.selected||o.checked}])},[(0,u.renderSlot)(l.$slots,"before",{data:r(o)}),o.level?((0,u.openBlock)(),(0,u.createElementBlock)("div",x,[((0,u.openBlock)(!0),(0,u.createElementBlock)(u.Fragment,null,(0,u.renderList)(o.level,(e=>((0,u.openBlock)(),(0,u.createElementBlock)("span",{key:e,class:"mdc-tree-node__indent-unit"})))),128))])):(0,u.createCommentVNode)("",!0),(0,u.createElementVNode)("div",E,[o[(0,u.unref)(a).isLeaf]?(0,u.createCommentVNode)("",!0):((0,u.openBlock)(),(0,u.createElementBlock)("span",{key:0,onClick:e=>{return a=o,void f.onExpand(t.treeData,a);var a}},[o.expanded?(0,u.renderSlot)(l.$slots,"expand-more-icon",{key:0},(()=>[(0,u.createElementVNode)("i",{class:(0,u.normalizeClass)((0,u.unref)(g).cssClasses.icon),"aria-hidden":"true"}," expand_more ",2)])):(0,u.renderSlot)(l.$slots,"expand-less-icon",{key:1},(()=>[(0,u.createElementVNode)("i",{class:(0,u.normalizeClass)((0,u.unref)(g).cssClasses.icon),"aria-hidden":"true"}," chevron_right ",2)]))],8,C))]),e.treeData.multiple?((0,u.openBlock)(),(0,u.createElementBlock)("div",{key:1,class:"mdc-tree-node__checkbox",onClick:e=>n(o)},[o[(0,u.unref)(a).isLeaf]?((0,u.openBlock)(),(0,u.createBlock)(v,{key:0,checked:o.checked,disabled:o.disabled},null,8,["checked","disabled"])):((0,u.openBlock)(),(0,u.createBlock)(v,{key:1,checked:o.checked,indeterminate:o.indeterminate,disabled:o.disabled},null,8,["checked","indeterminate","disabled"]))],8,V)):(0,u.createCommentVNode)("",!0),(0,u.createElementVNode)("label",{class:"mdc-tree-node__label",onClick:a=>{return e.treeData.multiple?n(o):(r=o,void f.onSelect(t.treeData,r));var r}},[(0,u.renderSlot)(l.$slots,"title",{data:r(o)},(()=>[(0,u.createTextVNode)((0,u.toDisplayString)(o[(0,u.unref)(a).label]),1)]))],8,S),(0,u.renderSlot)(l.$slots,"after",{data:r(o)})],2),!o[(0,u.unref)(a).isLeaf]&&o.expanded?((0,u.openBlock)(),(0,u.createBlock)(c,{key:0,class:"mdc-tree-node__children",children:o[(0,u.unref)(a).children],"tree-data":e.treeData},(0,u.createSlots)({_:2},[(0,u.renderList)(l.$slots,((e,t)=>({name:t,fn:(0,u.withCtx)((e=>[(0,u.renderSlot)(l.$slots,t,(0,u.normalizeProps)((0,u.guardReactiveProps)(e)))]))})))]),1032,["children","tree-data"])):(0,u.createCommentVNode)("",!0)],2)))),128))])}}});const N={dataFormat:{label:"label",value:"value",children:"children",hasChildren:"hasChildren",isLeaf:"isLeaf",disabled:"disabled"},EVENTS:{CHANGE:"update:modelValue",SELECTED:"selected"}},_={name:"UiTree",customOptions:{UI_TREE:N}};var A=Object.assign(_,{props:{modelValue:{type:[String,Array],default:""},data:{type:Array,default:()=>[]},dataFormat:{type:Object,default:()=>({})},maxLevel:{type:Number,default:0},multiple:{type:Boolean,default:!1},singleChecked:{type:Boolean,default:!1},loadData:{type:[Function,null],default:null},autoExpandParent:{type:Boolean,default:!1},defaultExpandedKeys:{type:Array,default:()=>[]}},emits:[N.EVENTS.CHANGE,N.EVENTS.SELECTED],setup(e,t){let{expose:a,emit:n}=t;const r=e,l=(0,u.reactive)({$tree:null,nodeList:[],treeData:{dataFormat:Object.assign(N.dataFormat,r.dataFormat),maxLevel:r.maxLevel,nodeMap:new Map,selectedValue:r.modelValue,multiple:r.multiple,singleChecked:r.singleChecked,loadData:r.loadData,selectedEvent:{}}}),{nodeList:o,treeData:c}=(0,u.toRefs)(l),d=(0,u.computed)((()=>({"mdc-tree":!0,"mdc-tree--multiple":r.multiple})));function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.data;l.nodeList=l.$tree.getData(e),l.nodeList.length&&(f.setExpanded(l.treeData,l.nodeList,{autoExpandParent:r.autoExpandParent,defaultExpandedKeys:r.defaultExpandedKeys}),f.setSelected(l.treeData,l.treeData.selectedValue))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,u.nextTick)((()=>{t.length&&f.resetSelected(l.treeData,t),l.treeData.selectedValue=e,f.setSelected(l.treeData,e)}))}(0,u.watch)((()=>r.modelValue),((e,t)=>{Array.isArray(e)?((e,t)=>{for(const a of new Set([...e,...t]))if(e.filter((e=>e===a)).length!==t.filter((e=>e===a)).length)return!1;return!0})(l.treeData.selectedValue,e)||i(e,t):l.treeData.selectedValue!==e&&i(e)})),(0,u.watch)((()=>r.data),(e=>s(e))),(0,u.watch)((()=>l.treeData.selectedValue),(e=>{n(N.EVENTS.CHANGE,e,l.treeData.selectedEvent),n(N.EVENTS.SELECTED,Array.isArray(e)?e.map((e=>p(e))):p(e))})),(0,u.onBeforeMount)((()=>{if(r.multiple&&!Array.isArray(l.treeData.selectedValue))throw new Error("[UiTree]: The 'modelValue' prop must be an array in the multiple tree")})),(0,u.onMounted)((()=>{l.$tree=new f(l.treeData),s()}));const p=e=>l.treeData.nodeMap.get(e);return a({updateNode:function(e,t,a){switch(e){case"create":f.createNode(l.treeData,t,a);break;case"delete":f.deleteNode(l.treeData,t,a);break;default:f.updateNode(l.treeData,t,a)}},getNode:p}),(e,t)=>((0,u.openBlock)(),(0,u.createElementBlock)("div",{class:(0,u.normalizeClass)((0,u.unref)(d))},[(0,u.renderSlot)(e.$slots,"default"),(0,u.createVNode)(M,{children:(0,u.unref)(o),"tree-data":(0,u.unref)(c)},(0,u.createSlots)({_:2},[(0,u.renderList)(e.$slots,((t,a)=>({name:a,fn:(0,u.withCtx)((t=>[(0,u.renderSlot)(e.$slots,a,(0,u.normalizeProps)((0,u.guardReactiveProps)(t)))]))})))]),1032,["children","tree-data"])],2))}});var B=i({UiTree:A,UiTreeNode:M})}(),r=r.default}()}));